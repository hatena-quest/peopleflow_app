<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>æ—¥æ¬¡æ³¨æ–‡ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼</title>
    <style>
      :root {
        font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
        color: #1f2933;
        background-color: #f5f5f5;
      }

      body {
        margin: 0;
        padding: 24px 16px 48px;
        max-width: 480px;
        margin-inline: auto;
      }

      h1 {
        font-size: 1.6rem;
        margin-bottom: 0.75rem;
        text-align: center;
      }

      .storage-label {
        font-size: 0.9rem;
        color: #5f6b7c;
        text-align: center;
        margin-bottom: 16px;
      }
      .sync-status {
        text-align: center;
        font-size: 0.85rem;
        margin-bottom: 16px;
        padding: 6px 12px;
        border-radius: 999px;
        display: inline-block;
        background: #e5f5f2;
        color: #0f766e;
      }
      .sync-status.error {
        background: #fee2e2;
        color: #b91c1c;
      }

      .menu-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 12px;
        margin-bottom: 24px;
      }

      .menu-button {
        border: none;
        border-radius: 14px;
        padding: 18px;
        font-size: 1.1rem;
        font-weight: 600;
        background: #0d9488;
        color: #fff;
        box-shadow: 0 6px 14px rgba(13, 148, 136, 0.35);
        transition: transform 0.05s ease;
        min-height: 80px;
        touch-action: manipulation;
      }

      .menu-button:active {
        transform: scale(0.97);
      }

      .price {
        display: block;
        font-size: 0.95rem;
        font-weight: normal;
        margin-top: 6px;
        opacity: 0.85;
      }

      .cart-box {
        background: #fff;
        border-radius: 12px;
        padding: 16px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        margin-bottom: 24px;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .cart-title {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 600;
      }

      .cart-clear {
        border: none;
        background: transparent;
        color: #dc2626;
        font-weight: 600;
        font-size: 0.9rem;
        touch-action: manipulation;
      }

      .cart-summary {
        display: flex;
        justify-content: space-between;
        font-weight: 600;
        border-top: 1px solid #e5e7eb;
        padding-top: 8px;
      }

      .cart-total-value {
        font-size: 2rem;
        font-weight: 600;
      }

      .checkout-button {
        border: none;
        border-radius: 12px;
        padding: 14px;
        font-size: 1rem;
        font-weight: 600;
        background: #0d9488;
        color: #fff;
        touch-action: manipulation;
      }

      .checkout-button:disabled,
      .cart-clear:disabled {
        opacity: 0.5;
      }

      .cart-hint {
        font-size: 0.9rem;
        color: #6b7280;
        text-align: center;
      }

      .actions {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .action-button {
        border: none;
        border-radius: 12px;
        padding: 16px;
        font-size: 1rem;
        font-weight: 600;
        background: #374151;
        color: #fff;
        touch-action: manipulation;
      }

      .action-button.secondary {
        background: #dc2626;
      }

      @media (hover: hover) {
        .menu-button:hover,
        .action-button:hover,
        .checkout-button:hover,
        .cart-clear:hover {
          opacity: 0.9;
        }
      }

      .history-box {
        margin-top: 28px;
        background: #fff;
        border-radius: 12px;
        padding: 16px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      }

      .history-title {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 12px;
        font-weight: 600;
        gap: 8px;
      }

      .history-meta {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 2px;
      }

      .history-total-label {
        font-size: 0.85rem;
        color: #111827;
      }

      .history-hint {
        font-size: 0.8rem;
        color: #5f6b7c;
      }

      .history-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .history-row {
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 10px 12px;
        background: #fdfdfd;
        font-size: 0.95rem;
      }

      .history-info {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .history-total {
        font-weight: 600;
      }

      .history-time {
        font-size: 0.8rem;
        color: #6b7280;
        margin-top: 3px;
      }

      .history-empty {
        text-align: center;
        color: #6b7280;
        font-size: 0.9rem;
      }

      #recordStatus {
        font-weight: 600;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <h1>æ—¥æ¬¡æ³¨æ–‡ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼</h1>
    <div id="todayLabel" class="storage-label"></div>
    <div id="orderSyncStatus" class="sync-status">ãƒ‡ãƒ¼ã‚¿é€£æº: æœªé€ä¿¡</div>

    <div class="cart-box">
      <div class="cart-title">
        <span>ç¾åœ¨ã®å°è¨ˆ</span>
        <button id="clearCartButton" class="cart-clear" disabled>å°è¨ˆã‚’ã‚¯ãƒªã‚¢</button>
      </div>
      <div class="cart-summary">
        <span>å°è¨ˆ</span>
        <span id="cartTotal" class="cart-total-value">Â¥0</span>
      </div>
      <button id="checkoutButton" class="checkout-button" disabled>ä¼šè¨ˆã‚’ç¢ºå®š</button>
      <div class="cart-hint">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ã‚¿ãƒƒãƒ—ã—ã¦å°è¨ˆã‚’æ›´æ–°ã—ã¦ãã ã•ã„</div>
    </div>

    <div id="menuContainer" class="menu-grid"></div>

    <div class="actions">
      <button id="exportButton" class="action-button">ä»Šæ—¥ã®JSONã‚’æ›¸ãå‡ºã™</button>
      <button id="resetButton" class="action-button secondary">ä»Šæ—¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ</button>

      <div class="cart-hint" style="margin-top:12px;">äººæµã‚«ãƒ¡ãƒ©ï¼ˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ï¼‰</div>
      <div id="streamStatus" class="cart-hint">é…ä¿¡çŠ¶æ…‹: ä¸æ˜</div>

      <div class="actions" style="margin-top:12px;">
        <button id="streamStart" class="action-button">â–¶ ã‚«ãƒ¡ãƒ©é…ä¿¡ é–‹å§‹</button>
        <button id="streamStop" class="action-button secondary">â–  ã‚«ãƒ¡ãƒ©é…ä¿¡ åœæ­¢</button>

        <button id="masterStart" class="action-button">â–¶ æ¯è‰¦ã‚³ãƒ³ã‚½ãƒ¼ãƒ« èµ·å‹•</button>
        <button id="masterStop" class="action-button secondary">â–  æ¯è‰¦ã‚³ãƒ³ã‚½ãƒ¼ãƒ« åœæ­¢</button>

        <button id="openStream" class="action-button">ğŸ“º é…ä¿¡ã‚’é–‹ã</button>
        <button id="openMaster" class="action-button">ğŸ§  ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’é–‹ã</button>
        <button id="openPredict" class="action-button">ğŸ“ˆ äºˆæ¸¬ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</button>

        <div id="svcStatus" class="cart-hint">çŠ¶æ…‹: ä¸æ˜</div>
      </div>
    </div>

    <div class="history-box">
      <div class="history-title">
        <span>ä»Šæ—¥ã®æ³¨æ–‡å±¥æ­´</span>
        <div class="history-meta">
          <span id="dailyTotal" class="history-total-label">åˆè¨ˆ Â¥0</span>
        </div>
      </div>
      <div id="historyList" class="history-list"></div>
    </div>

    <script src="./app.js"></script>
  </body>
</html>
